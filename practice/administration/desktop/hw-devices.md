# Системы и технологии железа

<details>
    <summary>Черновой список</summary>

- Linux 5.19.0-35-generic ehci_hcd

- smbios

- dmi

- smp

- vsyscall32

- pci
  - PCI bridge
  - pci pciexpress

upgrade shadowing cdboot bootselect edd int13floppynec int13floppytoshiba int13floppy360 int13floppy1200 int13floppy720 int13floppy2880 int9keyboard int10video acpi usb biosbootspecification uefi

lm fpu fpu_exception wp vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ht tm pbe syscall nx rdtscp x86-64 constant_tsc arch_perfmon pebs bts rep_good nopl xtopology nonstop_tsc cpuid aperfmperf pni pclmulqdq dtes64 monitor ds_cpl vmx est tm2 ssse3 cx16 xtpr pdcm pcid sse4_1 sse4_2 x2apic popcnt tsc_deadline_timer xsave avx lahf_lm epb pti ssbd ibrs ibpb stibp tpr_shadow vnmi flexpriority ept vpid xsaveopt dtherm arat pln pts md_clear flush_l1d cpufreq

synchronous internal write-through instruction data

msi pm vga_controller bus_master cap_list rom fb

MEI Controller

pm msi ehci bus_master cap_list

EHCI Host Controller

pm msi pciexpress bus_master cap_list

High Definition Audio Controller:

- HDA Intel PCH Mic
- HDA Intel PCH Headphone
- HDA Intel PCH HDMI/DP,pcm=3

msi pm normal_decode bus_master cap_list

pm msi msix pciexpress bus_master cap_list rom ethernet physical tp 10bt 10bt-fd 100bt 100bt-fd 1000bt 1000bt-fd autonegotiation

MMC Host

pm msi pciexpress bus_master cap_list

pm msi pciexpress bus_master cap_list ethernet physical wireless

pm msi msix pciexpress xhci bus_master cap_list

xHCI Host Controller

usb-2.00

pm debug ehci bus_master cap_list

bluetooth usb-1.10

ISA bridge

isa bus_master cap_list

PnP device

pnp

6 port Mobile SATA AHCI Controller

sata msi pm ahci_1.0 bus_master cap_list emulated

gpt-1.00 partitioned partitioned:gpt

partitioned partitioned:dos

primary ntfs initialized

journaled extended_attributes large_files huge_files dir_nlink 64bit extents ext4 ext2 initialized recover

primary journaled extended_attributes large_files huge_files dir_nlink recover extents ext4 ext2 initialized

platform

Virtual Battery

Power Button

power

Lid Switch

Acer WMI hotkeys

Video Bus

Sleep Button

AT Translated Set 2 keyboard

i8042

ETPS/2 Elantech Touchpad

</details>
<br/>

Список для данной заметки я выбрал из вывода команды `lshw`. Эти технологии используются на низком уровне. Потому было бы неплохо хотя бы тезисно расписать что они делают.

## Мелочи

**Linux x.xx.x-xx-generic**: generic - это ядро без наложения патчей дистрибутива.

**vsyscall32**: система, благодаря которой можно запускать в 64-х разрядной системе 32-х разрядные утилиты.

**upgrade**:

```shell
sudo dmidecode | grep upgrade
		BIOS is upgradeable
```

Означает, что BIOS можно обновить.

**cdboot**: возможность загружать систему с компакт диска

**bootselect**: это не относится к меню настройки, которое при загрузке чаще всего вызывается нажатием **\<F2>** или **\<Del>**. При включенном параметре меню `bootselect` вызывается при загрузке клавишей **\<F12>**. Выведется список устройств, на которых обнаружен загрузчик и можно выбрать из них без изменения параметров BIOS.

## HCD и HCI

Первый раз эти вещи упоминаются в строке, где указывается какое ядро используется на данный момент в ОС. Буквы `HC..` обозначают **Host Controller ..** Это хост USB, сответственно драйвер и интерфейс. Подробнее о том, как ОС и железо работют с USB очень хорошо объясняется, например, [здесь](https://perscom.ru/usb/104-usb-host/665-usb35). Но если коротко, то у машины есть какое-то количество USB-шин. У каждой шины есть один хост (компьютер с контроллером USB), который делится на три основных уровня:

- интерфейс
- драйвера (HCD, драйвер USB, специфическое ПО для USB устройств)
- клиенты USB

Здесь мы встречаем **EHCI** - это стандарт, который позволяет обеспечивать надёжную передачу от софта девайсу и обратно. Имеется ещё **xHCI**, который является ещё более улученным вариантом стандата.

## smbios

Определяет управление питанием профили процессора, профили графического процессора, USB Map, DRM.

Нам будет интересно, что такое DMI. То есть **Desktop Managment Interface** - интерфейс управления компьютерными настольными системами, представляющими собой набор программных и аппаратных средств для сборра и отображения данных об оборудовании компьютера.

Поддержка данного интерфейса встроена в BIOS всех современных материнок. Также осуществляется через API в прикладных программных продуктах. Для взаимодействия с интерфейсом DMI, в BIOS бфла добавлена спецификация DMIBIOS, который с 1999 года проучила название SMBIOS. В соответствии со спецификацией SMBIOS, информация об оборудовании хранится в виде БД (DMI Pool Data). Ну и пощупать всё это можно в Linux можно при помощи утилиты `dmidecode`.

## smp

SMP (Symmetric Multiprocessor) - симметричная мультипроцессорная вычислительная система, которая обладает некоторыми характеристиками:

- имеется два или более процессоров сопоставимой производительности;
- процессоры совместно используют основную память и работают в едином
  виртуальном и физическом адресном пространстве;
- все процессоры связаны между собой посредством шины или по иной схеме, так
  что время доступа к памяти для любого из них одинаково;
- все процессоры разделяют доступ к устройствам ввода/вывода либо через одни и
  те же каналы, либо через разные каналы, обеспечивающие доступ к одному и тому же
  внешнему устройству;
- все процессоры способны выполнять одинаковые функции;
- любой из процессоров может обслуживать внешние прерывания;
- вычислительная система управляется интегрированной операционной системой,
  которая организует и координирует взаимодействие между процессорами и программами
  на уровне заданий, задач, файлов и элементов данных.

Альтернативой служит класстерная система,где в качестве физической единицы обмена информацией выступает сообщение или полный файл. В SMP допустимо взаимодействие на уровне отдельного элемента данных.

Операционная система планирует процессы или нити процессов (threads) сразу по всем процессорам, скрывая при этом от пользователя многопроцессорный характер SMPархитектуры.

## Шина PCI

В соответствии же со спецификацией **PCI** (Peripheral Component Interconnect) у каждого устройства есть прямой доступ к локальной шине процессора и шине системной памяти через связывающий их мост.

Это позволяет реализовать два преимущества: во-первых, оно позволяет выполнять по шине несколько операций одновременно, например, процессор может забирать из кэш-памяти моста данные, в то время как устройство обращается к системной памяти. Во-вторых, оно обеспечивает независимость локальной шины от процессора.

На PCI определены два основных вида устройств - инициатор (задатчик), получивший от арбитра шины разрешение на ее захват, и устройство назначения (приемник), с которым инициатор выполняет цикл обмена данными. Процессор через так называемые мосты (PCI Bridge) может быть подключен к нескольким каналам PCI, с тем чтобы обеспечить одновременную передачу данных между независимыми каналами PCI (это стало возможно в спецификации 2.1). Поскольку данные и адресная информация передаются по одному и тому же пути, передача данных требует как минимум двух циклов шины: передачи адреса и доставки самих данных. Однако благодаря поддержке пакетной передачи в режиме владения шиной отправитель может вслед за адресной информацией послать все данные сразу. Об их объеме отправитель и получатель договариваются предварительно. Пакетную передачу не может прервать никакое другое устройство, поскольку оно не находится в режиме владения шиной.

PCI-устройства с точки зрения пользователя самонастраиваемы (Plug and Play). После старта компьютера системное программное обеспечение обследует конфигурационное пространство PCI каждого устройства, подключённого к шине, и распределяет ресурсы. Каждое устройство может затребовать до шести диапазонов в адресном пространстве памяти PCI или в адресном пространстве ввода-вывода PCI.

### Спецификация

| Параметр                                                                                    | Значение                                                                                       |
| :------------------------------------------------------------------------------------------ | :--------------------------------------------------------------------------------------------- |
| частота шины                                                                                | 33,33 или 66,66 МГц, передача синхронная                                                       |
| разрядность шины                                                                            | 32 или 64 бита, шина мультиплексированная (адрес и данные передаются по одним и тем же линиям) |
| пиковая пропускная способность для 32-разрядного варианта, работающего на частоте 33,33 МГц | 133 Мбайт/с                                                                                    |
| адресное пространство памяти                                                                | 32 бита (4 байта)                                                                              |
| адресное пространство портов ввода-вывода                                                   | 32 бита (4 байта)                                                                              |
| конфигурационное адресное пространство (для одной функции)                                  | 256 байт                                                                                       |
| напряжение                                                                                  | 3,3 или 5 В                                                                                    |

### Стандартные модификации

|  Модификация  | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| :-----------: | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|    PCI 1.0    | Первая спецификация, утвержденная в июне 1992 года. Единственный выпущенный чипсет с поддержкой этой версии шины PCI — Intel 420TX (Saturn). Материнские платы для процессоров 486 на основе этого чипсета выпускались с конца 1992 года по 1994 год и не получили широкого распространения. Поддерживает работу с периферийными картами PCI версий 1.0 и 2.0 (карты версии PCI 2.1, появившиеся в 1996 году, уже не поддерживаются). Арбитраж централизованный.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|    PCI 2.0    | Первая версия базового стандарта, получившая широкое распространение, использовались как карты, так и слоты с сигнальным напряжением только 5 В. Пиковая пропускная способность — 133 Мбайт/с. Материнские платы основанные на чипсетах с поддержкой PCI 2.0 поддерживают работу с периферийными картами PCI версий 2.0 и 2.1 (карты версии PCI 2.2, появившиеся в 1998 году, уже не поддерживаются). Первый чипсет, поддерживающий эту спецификацию, — Intel 430LX (Mercury), появившийся в 1993 году и предназначенный для материнских плат с разъемом Socket 4 для установки первых процессоров Pentium с тактовой частотой 60 МГц и 66 МГц. Арбитраж централизованный.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| PCI 2.1 — 3.0 | Отличались от версии 2.0 возможностью одновременной работы нескольких шинных задатчиков (англ. bus-master, т. н. конкурентный режим), а также появлением универсальных карт расширения, способных работать как в слотах, использующих напряжение 5 В, так и в слотах, использующих 3,3 В (с частотой 33 и 66 МГц соответственно). Пиковая пропускная способность для 33 МГц — 133 Мбайт/с, а для 66 МГц — 266 Мбайт/с. Арбитраж децентрализованный.<br><br> Версия 2.1 — работа с картами, рассчитанными на напряжение 3,3 В, и наличие соответствующих линий питания являлись опциональными. Версия 2.2 — сделанные в соответствии с этими стандартами карты расширения имеют универсальный ключ разъёма по питанию и способны работать во многих более поздних разновидностях слотов шины PCI, а также, в некоторых случаях, и в слотах версии 2.1. Версия 2.3 несовместима с картами PCI, рассчитанными на использование 5 В, несмотря на продолжающееся использование 32-битных слотов с 5-вольтовым ключом. Карты расширения имеют универсальный разъём, но не способны работать в 5-вольтовых слотах ранних версий (до 2.1 включительно). Версия 3.0 завершает переход на карты PCI 3,3 В, карты с напряжением 5 В больше не поддерживаются.                                                                                                                                                                                                                                        |
|    PCI 64     | Расширение базового стандарта PCI, появившееся в версии 2.1, удваивающее число линий данных и пропускную способность. Слот PCI 64 является удлинённой версией обычного PCI-слота. Формально совместимость 32-битных карт с 64-битным слотами (при условии наличия общего поддерживаемого сигнального напряжения) полная, а совместимость 64-битной карты с 32-битным слотами является ограниченной (в любом случае произойдёт потеря производительности). Работает на тактовой частоте 33 МГц. Пиковая пропускная способность — 266 Мбайт/с. Арбитраж децентрализованный.<br><br>Версия 1 использует слот PCI 64-бита и напряжение 5 В. Версия 2 использует слот PCI 64-бита и напряжение 3,3 В.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|    PCI 66     | Версия PCI 66 является развитием PCI 64, работающим на тактовой частоте 66 МГц, использует напряжение 3,3 В в слоте; карты имеют универсальный форм-фактор либо на 3,3 В. Пиковая пропускная способность — 533 Мбайт/с. Арбитраж децентрализованный.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|   PCI 64/66   | Комбинация PCI 64 и PCI 66 позволяет вчетверо увеличить скорость передачи данных по сравнению с базовым стандартом PCI; использует 64-битные совместимые только с универсальными 3,3-вольтовые слоты или 3,3-вольтовые 32-битные карты расширения. Карты стандарта PCI64/66 имеют либо универсальный (но имеющий ограниченную совместимость с 32-битными слотами), либо 3,3-вольтовый форм-фактор (последний вариант принципиально не совместим с 32-битными 33-мегагерцовыми слотами популярных стандартов). Пиковая пропускная способность — 533 Мбайт/с. Арбитраж децентрализованный.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
|     PCI-X     | Развитие версии PCI 64. Для всех вариантов шины существуют следующие ограничения по количеству подключаемых к каждой шине устройств: 66 МГц — 4, 100 МГц — 2, 133 МГц — 1 (или 2, если одно или оба устройства не находятся на платах расширения, а уже интегрированы на одну плату вместе с контроллером), 266, 533 МГц и выше — 1.<br><br> Версия 1.0 — введено две новые рабочие частоты: 100 и 133 МГц, а также механизм раздельных транзакций для улучшения производительности при одновременной работе нескольких устройств. Как правило, обратно совместима со всеми 3,3-вольтовыми и универсальными PCI-картами. Карты обычно выполняются в 64-битном формате на 3,3 В и имеют ограниченную обратную совместимость со слотами PCI64/66, а некоторые — в универсальном формате и способны работать (хотя практической ценности это почти не имеет) в обычном PCI 2.2/2.3. Пиковая пропускная способность — 1024 Мбайт/с.<br><br>Версия 2.0 — введено две новые рабочие частоты: 266 и 533 МГц, а также коррекция ошибок чётности при передаче данных (ECC). Расширяет конфигурационное пространство PCI до 4096 байт и допускает расщепление на 4 независимых 16-битных шины, что применяется исключительно во встраиваемых и промышленных системах, сигнальное напряжение снижено до 1,5 В, но сохранена обратная совместимость разъёмов со всеми картами, использующими сигнальное напряжение 3,3 В. Пиковая пропускная способность — 4096 Мбайт/с. Арбитраж децентрализованный. |
|   Mini PCI    | Форм-фактор PCI 2.2, предназначенный для использования, в основном, в ноутбуках.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|    CardBus    | PCMCIA — форм-фактор для 32-битных карт, 33 МГц PCI.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|  CompactPCI   | Используются модули размера Eurocard, включаемые в PCI-backplane.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
|  PC/104-Plus  | Индустриальная шина, использующая набор сигналов PCI, но с другим разъёмом.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
|    StackPC    | Индустриальная шина, использующая набор сигналов PCI-E.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
|      PMC      | PCI Mezzanine Card[en] — мезонинная шина, соответствующая стандарту IEEE P1386.1.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
|     ATCA      | Шина следующего поколения для телекоммуникационной индустрии на основе интерфейса PCI Express                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|  PCI Express  | последовательный интерфейс, использующий программную модель PCI, однако обладающий более производительным физическим уровнем (используется LVDS и новые разъёмы)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| Universal PCI | вариация интерфейса PCI, слот которого имеет два ключа — выступа внутри разъема. В основном, применяется в промышленном оборудовании.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |

Подробнее об этом [здесь](https://www.computer-museum.ru/technlgy/pci.htm)

## Video ROM BIOS Shadow

Опция Video ROM BIOS Shadow (shadowing или затенение) позволяет определить, будет ли выполняться копирование кода BIOS, отвечающего за работу с графикой (БИОС видеокарты), из ПЗУ в более быструю оперативную память. Для современных операционных систем опция не имеет практического значения.

Значения опции:

- **Enabled** – будет выполняться копирование кода BIOS видеокарты й в оперативную память;

- **Cached** – будет выполняться копирование кода BIOS, отвечающего за работу с графикой в оперативную память. Кроме этого, доступ к области оперативной памяти, в которой будет хранится БИОС, для остальных программ заблокируется;

- **Disabled** – отключить опцию.

Если установлена современная операционная система, не использующая BIOS видеокарты во время своей работы, данную возможность рекомендуется отключить (Disabled).

## Enhanced Disk Drive extensions (EDD)

Данный сервис позволяет работать с жёсткими дисками более 8 ГБ.
